---
title: "消息队列对比"
author: "Charles"
description: ""
tags:
  - kubernetes
slug: "message-queue"
pubDatetime: 2021-07-16T12:18:53.000+08:00
modDatetime: 2022-06-13T10:49:07.000+08:00
featured: false
draft: false
---

| MQ        | 消息模型                  | 流处理    | 事务消息 | 顺序消息 | Exactly-Once Semantics       | 死信队列     | 延时消息支持 | 消息持久化/保留策略              | 分层存储/Tiered Storage | 多租户支持     | 性能（吞吐/延迟） | 可扩展性 | 使用场景                           |
|-----------|---------------------------|-----------|----------|----------|------------------------------|--------------|--------------|----------------------------------|--------------------------|----------------|-------------------|----------|------------------------------------|
| ActiveMQ  | 点对点、发布订阅          | 部分支持  | 支持     | 部分支持 | 部分支持                     | 支持         | 部分支持     | 支持（磁盘/数据库，可配置）      | 不支持                   | 一般（vhost）  | 一般              | 一般     | 通用                               |
| RocketMQ  | 点对点、发布订阅          | 部分支持  | 支持     | 支持     | 支持（事务实现）             | 支持         | 支持         | 支持（磁盘，时间/大小保留）      | 不支持                   | 一般           | 优秀              | 优秀     | 高性能、高吞吐量、金融/电商        |
| RabbitMQ  | 点对点、发布订阅          | 部分支持  | 部分支持 | 部分支持 | 部分支持（at-least-once为主）| 支持         | 部分支持     | 部分（消费后删除，可持久化）     | 不支持                   | 一般（vhost）  | 良好              | 良好     | 通用、复杂路由                     |
| Kafka     | 发布订阅                  | 非常强    | 部分支持 | 部分支持 | 支持（幂等+事务，强）        | 部分支持     | 部分支持     | 优秀（日志持久化，灵活保留）     | 支持（KIP-405，已成熟）  | 有限（ACL模拟）| 优秀              | 优秀     | 流处理、大数据、事件溯源           |
| Pulsar    | 点对点、发布订阅          | 非常强    | 支持     | 支持     | 支持（事务+幂等）            | 支持         | 支持         | 优秀（BookKeeper，灵活）         | 支持（原生，最强）       | 优秀（内置）   | 优秀              | 优秀     | 通用、高性能、多租户、云原生       |
| NSQ       | 发布订阅                  | 部分支持  | 不支持   | 部分支持 | 不支持/部分（JetStream）     | 支持         | 不支持       | 部分（内存+磁盘，可配置）        | 不支持                   | 一般           | 优秀              | 优秀     | 高吞吐量、实时消息                 |
| NATS      | 发布订阅                  | 部分支持  | 不支持   | 支持     | 部分支持（JetStream）        | 部分支持     | 部分支持     | 部分（JetStream持久化）          | 不支持                   | 优秀（账户隔离）| 优秀              | 优秀     | 实时消息、微服务、轻量级           |
| Redis     | 发布订阅 + 消费者组       | 优秀      | 不支持   | 支持     | 部分支持（at-least-once + 幂等需业务） | 部分支持（pending 手动） | 不支持（需模拟） | 支持（AOF/RDB + XTRIM 灵活修剪） | 不支持                   | 一般（db/命名空间）| 优秀（亚毫秒延迟）| 良好     | 实时低延迟、缓存+消息一体、轻量微服务 |

### 推荐
- 追求最高吞吐量 + 海量日志/事件流 + 大数据生态集成 → 首选 **Kafka**（事实标准，生态最完善，与 Flink/Spark/ClickHouse 无缝，适合实时分析、日志聚合、事件溯源）
- 需要统一消息队列 + 流处理 + 多租户/云原生/K8s 友好 → 首选 **Pulsar**（计算存储分离、多租户原生支持、Tiered Storage 降低长期成本，适合大型企业/SaaS/混合云场景，避免多套 MQ 维护）
- 严格事务消息 + 顺序保证 + 金融/电商/高一致性业务 → 首选 **RocketMQ**（阿里双11 锤炼，事务消息最强、延迟队列精度高，适合订单、支付、扣款等核心链路）
- 复杂路由 / 低延迟任务队列 / RPC / 传统消息模式 → 首选 **RabbitMQ**（AMQP 协议灵活、路由强大、社区活跃，适合中小规模、微服务解耦、后台任务调度）
- 轻量级实时消息 / 微服务通信 / 极低延迟 + 简单运维 → 首选 **NATS**（JetStream 后支持持久化，性能爆炸、部署极简，适合云原生、边缘、IoT、实时通知）
- 已有 Redis 缓存环境 / 追求亚毫秒延迟 + 缓存+消息一体 / 中小规模实时场景 → 首选 **Redis**（Streams + Pub/Sub 超低延迟、运维简单、消费者组支持，适合聊天、通知、实时监控、微服务轻量 pub-sub，避免引入新组件）
- 高吞吐 + 极简部署 / 无复杂依赖 → 可选 **NSQ**（Go 实现、零配置、易水平扩展，适合实时推送、监控、简单 pub-sub 场景）
- 遗留 Java 系统 / JMS 兼容 / 企业传统集成 → 可选 **ActiveMQ**（成熟稳定、协议支持广，但性能/扩展不如现代 MQ，适合迁移过渡期）